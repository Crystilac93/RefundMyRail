// PATCH FOR server.mjs - Switch to MemoryStore

// Find these lines (around line 163-171):
// --- Session Middleware (FIXED 4.0 - Upstash Specific) ---
// We explicitly configure the serializer and disable TTL management logic that might conflict.
const sessionStore = new RedisStore({
    client: redisDb,
    prefix: "sess:",
    // Use 86400 (1 day) as standard TTL
    // Note: If this STILL fails, remove 'ttl' entirely and rely on cookie.maxAge
    ttl: 86400,
});

// REPLACE WITH:
// --- Session Middleware (MemoryStore for development) ---
// Note: Sessions will be lost on server restart
// TODO: Debug RedisStore compatibility issue with Upstash
console.log("⚠️  Using MemoryStore for sessions (development only)");
const sessionStore = new session.MemoryStore();
